# プライバシーポリシー

**Netflix Jikkyo Chrome 拡張機能**

最終更新日: 2026年2月26日

---

## 1. はじめに

本プライバシーポリシーは、Chrome 拡張機能「Netflix Jikkyo」（以下「本拡張機能」）におけるユーザー情報の取り扱いについて説明します。本拡張機能は、Netflix の視聴画面上でリアルタイムのコメント共有機能を提供します。

本拡張機能はサーバーレスアーキテクチャを採用しており、ユーザーのコメントデータを収集・保存する中央サーバーを持ちません。

## 2. 収集する情報

### 2.1 ローカルに保存される情報

以下の情報はユーザーのブラウザ内にのみ保存され、外部に送信されません。

| データ | 保存先 | 目的 |
|--------|--------|------|
| コメント履歴（テキスト、タイムスタンプ、タイトルID） | IndexedDB | コメント一覧の表示 |
| 設定（ニックネーム、コメント色、弾幕速度等） | chrome.storage.sync | ユーザー設定の同期 |
| 認証状態（Google アカウント情報） | chrome.storage.local | ニックネーム管理 |
| 機能フラグのキャッシュ | chrome.storage.session | リモート設定の一時保存 |

### 2.2 P2P 通信で共有される情報

同じ Netflix 作品を視聴中の他のユーザーと、以下の情報が WebRTC（P2P）を通じて直接共有されます。

- コメントテキスト
- ニックネーム
- コメントの色・位置・サイズ設定
- タイムスタンプ

これらの情報は同じ作品を同時に視聴しているピア間でのみ共有され、第三者のサーバーを経由しません。

### 2.3 Google 認証

ニックネーム管理のため、任意で Google OAuth 認証を利用できます。取得する情報は以下のみです。

- メールアドレス
- 表示名
- プロフィール画像 URL

これらの情報はユーザーのブラウザ内（`chrome.storage.local`）にのみ保存されます。

## 3. 収集しない情報

本拡張機能は以下の情報を**一切収集しません**。

- Netflix の視聴履歴・閲覧履歴
- IP アドレス（P2P 通信における WebRTC の仕組み上、接続先ピアに IP が見える場合がありますが、本拡張機能はこれを記録・収集しません）
- 決済情報
- Cookie
- アナリティクスデータ（Google Analytics 等のトラッキングツールは一切使用していません）

## 4. 第三者サービスとの通信

本拡張機能は、機能の提供に必要な最小限の外部通信を行います。

| サービス | 目的 | 送信される情報 |
|----------|------|---------------|
| Netflix（netflix.com） | 作品メタデータ（タイトル・あらすじ）の取得 | 作品ID（Netflix の Cookie を含むリクエスト） |
| Cloudflare Workers（netflix-jikkyo-config.skeigoly.workers.dev） | リモート機能フラグの取得 | なし（GET リクエストのみ） |
| Google OAuth（accounts.google.com） | 認証（任意） | Google が規定する認証情報 |
| GitHub API（api.github.com） | 拡張機能の更新確認 | なし（GET リクエストのみ） |
| BitTorrent トラッカー | P2P ピア発見（Trystero ライブラリ経由） | ルーム識別子（ハッシュ値） |

## 5. データのセキュリティ

本拡張機能は以下のセキュリティ対策を実施しています。

- **通信の暗号化** — WebRTC の DTLS/SRTP による P2P 通信の暗号化、HTTPS による外部 API との通信
- **入力検証** — P2P で受信した全メッセージの構造・型・長さを検証
- **テキスト無害化** — 制御文字の除去、テキスト長の制限
- **レート制限** — ピアごとのメッセージ送信頻度を制限
- **XSS 防止** — innerHTML を使用せず、textContent による安全な DOM 操作
- **Content Security Policy** — `script-src 'self'` による厳格な CSP 設定

## 6. データの保持と削除

- **コメント履歴** — IndexedDB に最大 365 日間保存され、期限切れデータは自動削除されます
- **設定データ** — ユーザーが明示的に変更・削除するまで保持されます
- **データのエクスポート・削除** — サイドパネルの設定画面からコメント履歴のエクスポートおよび全削除が可能です
- **アンインストール時** — 拡張機能をアンインストールすると、IndexedDB および chrome.storage に保存された全データが Chrome により自動削除されます

## 7. お子様のプライバシー

本拡張機能は 13 歳未満のお子様を対象としていません。13 歳未満のお子様からの情報を意図的に収集することはありません。

## 8. ポリシーの変更

本プライバシーポリシーは予告なく変更される場合があります。重要な変更がある場合は、拡張機能のアップデートを通じてお知らせします。最新のポリシーは本ページでご確認ください。

## 9. お問い合わせ

本プライバシーポリシーに関するご質問やご懸念がある場合は、以下にお問い合わせください。

- **GitHub Issues**: [https://github.com/keigoly/netflix-jikkyo/issues](https://github.com/keigoly/netflix-jikkyo/issues)
